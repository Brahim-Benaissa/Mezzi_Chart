<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galaxy Rotation Curve & Mezzi Effect</title>


  <!-- ✅ SEO Meta Description -->
<meta name="description" content="Explore the Galaxy Rotation Curve and Mezzi Effect with interactive visualizations. Adjust the Mezzi factor to see how gravitational models affect observed galactic velocities." />

<!-- ✅ Keywords (optional, minor SEO benefit) -->
<meta name="keywords" content="galaxy rotation curve, mezzi effect, dark matter, astrophysics visualization, galactic dynamics, SPARC data, astronomy simulation" />

<!-- ✅ Open Graph Metadata (for social previews like Facebook, LinkedIn) -->
<meta property="og:title" content="Galaxy Rotation Curve & Mezzi Effect" />
<meta property="og:description" content="Interactive visualization of galaxy rotation dynamics and the Mezzi Effect. Adjust parameters to see how apparent velocities change across the galactic radius." />
<meta property="og:type" content="website" />

<!-- ✅ Twitter Card Metadata -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Galaxy Rotation Curve & Mezzi Effect" />
<meta name="twitter:description" content="Visualize how the Mezzi Effect alters the galaxy rotation curve using an interactive astrophysics simulation." />


  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      background: #05070d;
      color: #eaeaea;
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }
    .container {
      max-width: 800px;
      margin: 3rem auto;
      padding: 2rem;
      border-radius: 20px;
      background: radial-gradient(circle at center, #0b0e18 0%, #05070d 100%);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
    }
    .canvas-wrapper {
      position: relative;
      width: 100%;
      padding-top: 50%;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 110%;
    }
    .slider-section {
      text-align: center;
      margin-top: 2rem;
    }
    input[type="range"] {
      width: 70%;
      appearance: none;
      height: 8px;
      border-radius: 4px;
      background: linear-gradient(90deg, #ff4b4b 0%, #1976d2 100%);
      outline: none;
      margin-top: 1rem;
      margin-bottom: 1rem;
    }
    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: radial-gradient(circle, #fff 0%, #00b4d8 80%);
      box-shadow: 0 0 15px #00b4d8, 0 0 20px #ff4b4b;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      border: 2px solid #fff;
    }
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.3);
      box-shadow: 0 0 25px #00b4d8, 0 0 30px #ff4b4b;
    }
    #caption {
      color: #bbb;
      margin-top: 0.3rem;
      font-size: 0.95rem;
      font-style: italic;
    }
    .slider-section label {
      font-weight: 700;
      font-size: 1.1rem;
      color: #00b4d8;
      cursor: pointer;
    }

    /* Share button styles */
    #shareButton {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 8px 12px;
      background-color: #00b4d8;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    #shareButton:hover {
      background-color: #ff4b4b;
    }

    .canvas-wrapper:hover #shareButton {
      opacity: 1;
    }

    /* Toast notification */
    #toast {
      visibility: hidden;
      min-width: 200px;
      margin-left: -100px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 4px;
      padding: 10px;
      position: fixed;
      z-index: 999;
      left: 50%;
      bottom: 30px;
      font-size: 16px;
      opacity: 0;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="canvas-wrapper">
      <canvas id="galaxyCanvas"></canvas>
      <canvas id="chartCanvas"></canvas>
      <button id="shareButton">Share Link</button>
    </div>

    <div class="slider-section">
      <label for="mezziSlider" style="font-size: 24px;"><b>Add the Mezzi Effect</b></label>
      <br />
      <input type="range" id="mezziSlider" min="0" max="1" step="0.01" value="0" />
      <div id="caption">
        Newtonian gravity, velocities follow Keplerian decline.
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div id="toast"></div>

  <script>
    const galaxyCanvas = document.getElementById("galaxyCanvas");
    const chartCanvas = document.getElementById("chartCanvas");
    const gctx = galaxyCanvas.getContext("2d");

    // Star initialization
    const stars = [];
    const STAR_COUNT = 400;
    for (let i = 0; i < STAR_COUNT; i++) {
      const r = Math.random() * 100;
      const angle = Math.random() * 2 * Math.PI;
      stars.push({
        x: 0.5 + (r / 200) * Math.cos(angle),
        y: 0.5 + (r / 200) * Math.sin(angle),
        brightness: Math.random() * 0.8 + 0.2,
        initialRadius: r
      });
    }

    // Draw galaxy with Mezzi effect
    function drawGalaxy(mezziFactor = 0) {
      const w = galaxyCanvas.width;
      const h = galaxyCanvas.height;
      const cx = w / 2;
      const cy = h / 2;
      gctx.clearRect(0, 0, w, h);

      for (const s of stars) {
        const radiusFactor = 1 - mezziFactor * (1 - (s.initialRadius / 100));
        const r = s.initialRadius * radiusFactor;
        const x = s.x * w + r * Math.cos(Math.atan2(s.y - 0.5, s.x - 0.5));
        const y = s.y * h + r * Math.sin(Math.atan2(s.y - 0.5, s.x - 0.5));
        gctx.beginPath();
        gctx.arc(x, y, 1.2, 0, 2 * Math.PI);
        gctx.fillStyle = `rgba(255, 230, 180, ${s.brightness})`;
        gctx.fill();
      }
    }

    const r_values = [0.27, 0.54, 0.81, 1.08, 1.35, 1.62, 1.89, 2.15, 2.42];
    const observed_base = [24800, 46200, 60500, 69600, 77500, 82900, 84100, 85600, 87600];
    const mezzi_base = [85424, 105694, 113877, 116347, 115697, 113405, 110250, 106696, 103019];

    const ctx = chartCanvas.getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: r_values,
        datasets: [
          {
            label: 'Observed Velocity',
            data: observed_base,
            borderColor: '#ff4b4b',
            borderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 4,
            pointBackgroundColor: '#ff4b4b',
            tension: 0.35
          },
          {
            label: 'Calculated Velocity',
            data: mezzi_base,
            borderColor: '#00b4d8',
            borderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 4,
            pointBackgroundColor: '#00b4d8',
            tension: 0.35
          }
        ]
      },
      options: {
        maintainAspectRatio: false,
        animation: { duration: 800, easing: 'easeOutQuart' },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              color: '#fff',
              font: { size: 13 },
              usePointStyle: true,
              pointStyle: 'circle',
              boxWidth: 4,
              boxHeight: 4,
              padding: 10
            }
          },
          title: { display: false, color: '#fff', font: { size: 18 } }
        },
        scales: {
          x: { title: { display: true, text: 'Radius (×10²⁰ m) SPARC data Galaxy UGC06399', color: '#fff', font: { size: 14 } },
               grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#fff', font: { size: 12 } } },
          y: { title: { display: true, text: 'Velocity (m/s)', color: '#fff', font: { size: 14 } },
               min: 0, max: 130000, grid: { color: 'rgba(255,255,255,0.1)' }, ticks: { color: '#fff', font: { size: 12 } } }
        }
      }
    });

    const slider = document.getElementById('mezziSlider');
    const caption = document.getElementById('caption');

    function resizeCanvases() {
      const wrapper = document.querySelector('.canvas-wrapper');
      const w = wrapper.clientWidth;
      const h = wrapper.clientHeight;
      galaxyCanvas.width = w;
      galaxyCanvas.height = h;
      chartCanvas.width = w;
      chartCanvas.height = h;
      drawGalaxy(parseFloat(slider.value));
      chart.resize();
    }

    window.addEventListener('resize', resizeCanvases);

    slider.addEventListener('input', () => {
      const mezzi = parseFloat(slider.value);
      const updated = mezzi_base.map((v, i) => (1 - mezzi) * v + mezzi * observed_base[i]);
      chart.data.datasets[1].data = updated;
      chart.update();
      drawGalaxy(mezzi);

      if (mezzi < 0.3) caption.textContent = "The rotational velocities are inferred from the true scale distances";
      else if (mezzi < 0.7) caption.textContent = "Apparent compression, shrinking the perceived distances";
      else caption.textContent = "Galaxy appears compressed, rotation curves appear flatter.";
    });

    resizeCanvases();

    // Share Link functionality using toast notification
    document.getElementById('shareButton').addEventListener('click', function() {
      const link = window.location.href;
      navigator.clipboard.writeText(link)
        .then(() => showToast('Link copied to clipboard!'))
        .catch(() => showToast('Failed to copy the link.'));
    });

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.visibility = 'visible';
      toast.style.opacity = '1';
      toast.style.transform = 'translateY(0)';
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(20px)';
        setTimeout(() => toast.style.visibility = 'hidden', 500);
      }, 3000);
    }
  </script>
</body>
</html>
